  name: Daily Autonomous Agent

  on:
    schedule:
      - cron: '0 8 * * *'
    workflow_dispatch:

  jobs:
    run-agent:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - uses: actions/setup-python@v5
          with:
            python-version: '3.11'
        - run: pip install -r requirements.txt
        - run: cd agent && python orchestrator.py
          env:
            OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
        - run: |
            git config user.email "agent@bot.com"
            git config user.name "Agent"
            git add -A
            git diff --staged --quiet || git commit -m "Auto-generated content"
            git push
